{% load static %}
{% load humanize %}
{% load cart_tags %}

<div class="row g-4 g-lg-5">
    
    <!-- Левая колонка: Изображение -->
    <div class="col-lg-6">
        <div class="product-image-container">
            {% if product.image %}
                <img src="{{ product.image.url }}" 
                    alt="{{ product.name }}" 
                    class="product-image">
            {% else %}
                <img src="{% static 'img/no-image.jpg' %}" 
                    alt="No image" 
                    class="product-image">
            {% endif %}
            
            <!-- Индикатор наличия -->
            <div class="stock-indicator">
                <span class="stock-badge {% if product.available %}stock-in{% else %}stock-out{% endif %}">
                    {% if product.available %}В наличии{% else %}Нет в наличии{% endif %}
                </span>
            </div>

            <!-- Бейдж скидки -->
            {% if product.is_on_sale and product.old_price %}
                <div class="discount-badge">
                    -{{ product.discount_percentage }}%
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Правая колонка: Информация -->
    <div class="col-lg-6">
        
        <!-- Категория -->
        <span class="product-category">
            {{ product.category.name|default:"Без категории" }}
        </span>
        
        <!-- Название товара -->
        <h2 class="product-title">
            {{ product.name }}
        </h2>

        <!-- Описание -->
        <p class="product-description">
            {{ product.description|default:"Описание отсутствует" }}
        </p>

        <!-- Рейтинг -->
        <div class="rating-container">
            <div class="stars">
                <i data-lucide="star" class="star filled"></i>
                <i data-lucide="star" class="star filled"></i>
                <i data-lucide="star" class="star filled"></i>
                <i data-lucide="star" class="star filled"></i>
                <i data-lucide="star" class="star"></i>
            </div>
            <span class="rating-text">4.8</span>
            <span class="rating-count">(24 отзыва)</span>
        </div>

        <!-- Цена -->
        <div class="price-container">
            <div class="d-flex align-items-baseline">
                <span class="current-price">{{ product.price|floatformat|intcomma }} ₽</span>
                {% if product.is_on_sale and product.old_price %}
                    <span class="original-price">{{ product.old_price|floatformat|intcomma }} ₽</span>
                {% endif %}
            </div>
            {% if product.is_on_sale and product.old_price %}
                <div class="price-savings">
                    Экономия: {{ product.savings|floatformat|intcomma }} ₽
                </div>
            {% endif %}
        </div>

    </div>
</div>
